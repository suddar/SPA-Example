<script>
	import sendCommand from "../../services/command-sender";

	let files;
	
	$: if (files) {
		console.log(files);

		for (const file of files) {
			console.log(`${file.name}: ${file.size} bytes`);
		}

		uploadImage();
	}

	async function uploadImage() {
		var command = {
			name: "CreateResource",
			requestData: {
				files: files,
			},
		};

		res = await sendCommand(command);
		console.log(res);
	}
</script>

<label for="avatar">Upload a picture:</label>
<input
	accept="image/png, image/jpeg"
	bind:files
	id="avatar"
	name="avatar"
	type="file"
/>

<label for="many">Upload multiple files of any type:</label>
<input bind:files id="many" multiple type="file" />

{#if files}
	<h2>Selected files:</h2>
	{#each Array.from(files) as file}
		<p>{file.name} ({file.size} bytes)</p>
	{/each}
{/if}
